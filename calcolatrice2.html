<!DOCTYPE html>
<html>
  <head>
    <title>Calcolatrice con hmtl + JS</title>
    <script>
        //classe della calcolatrice
        class Calcolatrice {
            //costruttore:
            //i numeri saranno usati come stringhe e per le opportune operazioni si usa il parseInt()
            constructor() {
                this.numero1 = '';
                this.numero2 = '';
                this.operatore = '';
            }

            //metodo per aggiungere un numero nel display della calcolatrice
            aggiungiNumero(numero) {
            //se sto scrivendo un numero di seguito a quello/quelli già inseriti nella calcolatrice 
            //lo concateno agli altri, se non ho ancora inserito l'operatore sarà concatenato a numero1
            if (this.operatore == '') {
                this.numero1 += numero;
                document.getElementById('risultato').value = this.numero1;
            } else {
                //altrimenti sarà concatenato a numero2
                this.numero2 += numero;
                document.getElementById('risultato').value = this.numero2;
            }
            }
            //metodo per inserire l'operatore (non è visualizzato nel display)
            aggiungiOperatore(op) {
                this.operatore = op;
            }
            //metodo per cancellare tutto, sia dal display sia dagli attributi
            cancellaTutto() {
                this.numero1 = '';
                this.numero2 = '';
                this.operatore = '';
                document.getElementById('risultato').value = '';
            }
            //metodo che calcola il risultato da visualizzare nel display in base ai 2 numeri 
            //salvati nella calcolatrice
            calcolaRisultato() {
            //risultato è una variabile locale
            let risultato = 0;
                switch (this.operatore) {
                    case '+':
                    //gli attributi sono salvati come stringhe quindi faccio il parseInt
                    risultato = parseInt(this.numero1) + parseInt(this.numero2);
                    break;
                    case '-':
                    risultato = parseInt(this.numero1) - parseInt(this.numero2);
                    break;
                    case '*':
                    risultato = parseInt(this.numero1) * parseInt(this.numero2);
                    break;
                    case '/':
                    risultato = parseInt(this.numero1) / parseInt(this.numero2);
                    break;
                    default:
                    risultato = 0;
                }
                //visualizzo il risultato sul display e lo salvo come nuovo numero1 per le successive operazioni 
                document.getElementById('risultato').value = risultato;
                this.numero1 = risultato.toString();
                this.numero2 = '';
                this.operatore = '';
            }
        }
        const calc = new Calcolatrice();
    </script>
  </head>
  <body>
    <h1>Calcolatrice</h1>
    <form>
        <input type="text" id="risultato" size = "15">
        <br>
        <input type="button" value="1" onclick="calc.aggiungiNumero('1')">
        <input type="button" value="2" onclick="calc.aggiungiNumero('2')">
        <input type="button" value="3" onclick="calc.aggiungiNumero('3')">
        <input type="button" value="+" onclick="calc.aggiungiOperatore('+')">
        <br>
        <input type="button" value="4" onclick="calc.aggiungiNumero('4')">
        <input type="button" value="5" onclick="calc.aggiungiNumero('5')">
        <input type="button" value="6" onclick="calc.aggiungiNumero('6')">
        <input type="button" value="-" onclick="calc.aggiungiOperatore('-')">
        <br>
        <input type="button" value="7" onclick="calc.aggiungiNumero('7')">
        <input type="button" value="8" onclick="calc.aggiungiNumero('8')">
        <input type="button" value="9" onclick="calc.aggiungiNumero('9')">
        <input type="button" value="*" onclick="calc.aggiungiOperatore('*')">
        <br>
        <input type="button" value="0" onclick="calc.aggiungiNumero('0')">
        <input type="button" value="=" onclick="calc.calcolaRisultato()">
        <input type="button" value="/" onclick="calc.aggiungiOperatore('/')">
        <br>
        <input type="button" value="Cancella tutto" onclick="calc.cancellaTutto()">
    </form>
  </body>
</html>
